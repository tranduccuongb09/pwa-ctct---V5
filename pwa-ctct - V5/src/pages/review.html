<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Xem lại & Giải thích — Kiểm tra nhận thức</title>

  <!-- PWA manifest (nếu có) -->
  <link rel="manifest" href="manifest.webmanifest" />
  <!-- Global styles -->
  <link rel="stylesheet" href="../css/style.css">

  <!-- UI chung đã gộp -->
  <link rel="stylesheet" href="../css/review-polish.css" />

</head>
<body data-page="ktnt">
  <!-- Header chuẩn -->
  <header class="hdr">
    <div class="container hdr__inner">
      <button class="hdr__back" onclick="history.back()">← Trang trước</button>
      <h1 class="hdr__title">XEM LẠI & GIẢI THÍCH — KIỂM TRA NHẬN THỨC</h1>
    </div>
  </header>

  <!-- Toolbar: 3 control trên 1 hàng -->
  <div class="bar">
    <div class="container bar__inner">
      <label class="chip"><input id="onlyWrong" type="checkbox" /> Chỉ hiện câu sai</label>
      <div class="search">
        <span aria-hidden="true">🔎</span>
        <input id="searchBox" type="search" placeholder="Nhập từ khoá..." />
      </div>
      <button id="printBtn" class="btn" title="In hoặc xuất PDF">🖨️ <span class="label">In/PDF</span></button>
    </div>
  </div>

  <!-- Stats pills -->
  <section class="container">
    <div class="pills">
      <span class="pill">📊 Tổng câu: <b id="stTotal">0</b></span>
      <span class="pill ok">✔ Đúng: <b id="stOk">0</b></span>
      <span class="pill bad">✖ Sai: <b id="stBad">0</b></span>
      <span class="pill">⏳ Chưa TL: <b id="stSkip">0</b></span>
      <span class="spacer">Hiển thị: <b id="stShown">0</b> mục</span>
    </div>
  </section>

  <!-- Meta pills (từ pack) -->
  <section class="container">
    <div class="pills" id="reviewMeta"></div>
  </section>

  <!-- Danh sách câu hỏi -->
  <main class="container">
    <div class="list" id="reviewList"><!-- Sẽ được render/normalize bởi review-core.js --></div>
  </main>

  <!-- Nút điều hướng cuối trang -->
  <nav class="container nav-actions" id="navActions">
  <a class="sr-only" href="exam.html">Làm lại</a>
  <button class="btn btn--ghost"   data-href="exam.html"      type="button">⟳ Làm lại</button>

  <a class="sr-only" href="materials.html">Tài liệu</a>
  <button class="btn btn--ghost"   data-href="materials.html" type="button">📚 Tài liệu học tập</button>

  <a class="sr-only" href="index.html">Trang chủ</a>
  <button class="btn btn--primary" data-href="index.html"     type="button">🏠 Về Trang chủ</button>
  </nav>

  <style>
  .sr-only{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;}
  </style>

  <script>
  const base = ''; // '../' nếu cần
  document.getElementById('navActions')?.addEventListener('click', (e)=>{
    const btn = e.target.closest('button[data-href]');
    if(!btn) return;
    const url = btn.getAttribute('data-href');
    if(url) window.location.href = base + url;
  });
  </script>
  <!-- Nút lên đầu trang -->
  <button class="to-top" id="toTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">⬆ Lên đầu</button>

  <!-- Core đã gộp: render + normalize + controls + nav -->
  <script src="../js/review-core.js"></script>

  <!-- (Tùy chọn) Nếu muốn ép dùng key cũ cho trang này, bật 2 dòng dưới:
  <script>
    CTCT_REVIEW.renderReview('reviewList', 'ctct_last_result_for_review');
    CTCT_REVIEW.bindControls({ listSelector: '#reviewList' });
  </script>
  -->
</body>
</html>
