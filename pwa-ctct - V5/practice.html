<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ôn trắc nghiệm – PTKV3</title>

  <!-- navbar chung -->
  <link rel="stylesheet" href="nav.css">

  <style>
    :root{
      --bg:#f5f6f8; --card:#fff; --text:#111827; --border:#e5e7eb;
      --brand:#A41919; --muted:#111827
    }
    html,body{margin:0;background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:1120px;margin:20px auto;padding:0 12px}
    .card{background:var(--card);border:1px solid var(--border);
      border-radius:16px;box-shadow:0 2px 10px rgba(0,0,0,.06);padding:18px;margin-bottom:14px}
    .field label{display:block;font-size:14px;color:var(--text);margin-bottom:6px}
    .select,.btn{height:42px;padding:10px 14px;font-size:16px;border-radius:10px;font-weight:600}
    .select{width:100%;border:1px solid var(--border);background:#fff;color:var(--text)}
    .btn{border:none;cursor:pointer}
    .btn-primary{background:var(--brand);color:#fff}
    .muted{color:var(--text)} [hidden]{display:none!important}
    .progress{height:10px;background:#eee;border-radius:8px;overflow:hidden;margin:10px 0 16px}
    #progressFill{height:100%;width:0;background:var(--brand);transition:width .25s ease}
    .option{display:flex;align-items:center;gap:12px;background:#fff;border:1px solid var(--border);
      border-radius:14px;padding:14px 16px;margin-bottom:12px;cursor:pointer}
    .option:hover{background:#f9f9f9;border-color:#c7c7c7}
    .option input{width:20px;height:20px;accent-color:var(--brand)}
    .option:has(input:checked){border-color:var(--brand);box-shadow:0 0 0 2px rgba(164,25,25,.08)}
    .opt-text{flex:1;line-height:1.55;text-align:justify}

    /* ===== BỔ SUNG P-1: style NAV chỉ cho trang Ôn trắc nghiệm (không ảnh hưởng nơi khác) ===== */
    .page-quiz .nav__inner .brand{color:var(--text);font-weight:700}
    .page-quiz .nav__links a{color:var(--text);font-weight:500}
    .page-quiz .nav__links a:hover{color:var(--brand)}
    .page-quiz .nav__links .is-active{color:var(--brand);border-bottom:2px solid #facc15;font-weight:700}
    .page-quiz .nav__search{display:none!important}

    /* Bổ sung dropdown sáng, nổi rõ, chỉ trong trang này */
    .page-quiz .nav__item{position:relative}
    .page-quiz .nav__item .dropdown{
      position:absolute;top:calc(100% + 6px);left:0;min-width:220px;
      background:#fff !important;color:#111827 !important;
      border:1px solid #e5e7eb;border-radius:10px;
      box-shadow:0 12px 28px rgba(0,0,0,.15);padding:6px;display:none;z-index:9999;
    }
    .page-quiz .nav__item .dropdown a{
      display:block;padding:10px 12px;border-radius:8px;color:#111827 !important;white-space:nowrap
    }
    .page-quiz .nav__item .dropdown a:hover{background:#f5f6f8;color:var(--brand)!important}
    .page-quiz .nav__item:hover>.dropdown,
    .page-quiz .nav__item:focus-within>.dropdown{display:block} /* desktop/keyboard */

    /* Mobile: dropdown nở ngay dưới item, full width, toggle bằng JS */
    @media (max-width:768px){
      .page-quiz .nav__item .dropdown{
        position:static;min-width:0;margin-top:6px;box-shadow:0 6px 16px rgba(0,0,0,.08)
      }
      .page-quiz .nav__item .dropdown{display:none}           /* mặc định ẩn */
      .page-quiz .nav__item.open .dropdown{display:block}     /* bật khi .open */
      .page-quiz .nav__overlay{background:transparent!important}
    }

    /* ===== Mobile polish quiz UI ===== */
    @media (max-width:640px){
      .card{border-radius:12px;padding:14px}
      .field label{font-size:13px}
      .select,.btn{height:46px;font-size:16px}
      #qTitle{font-size:20px}
      #qText{font-size:16px;text-align:left}
      .option{padding:12px 14px}
      .opt-text{line-height:1.5}
      .quiz-actions{position:sticky;bottom:0;left:0;right:0;background:#fff;padding:10px 12px;
        margin:10px -12px -12px;border-top:1px solid #eee;gap:8px}
      .quiz-actions .btn{flex:1;min-width:0}
    }
    @supports(padding:max(0px)){
      .quiz-actions{padding-bottom:max(10px,env(safe-area-inset-bottom))}
    }
    /* ===== /BỔ SUNG P-1 ===== */
  </style>
</head>
<body class="page-quiz">
  <header class="nav nav-light">
    <div class="nav__inner">
      <a class="brand" href="index.html">BAN CHỈ HUY PTKV3</a>
      <button class="nav__toggle" aria-label="Mở menu" aria-expanded="false"><span></span><span></span><span></span></button>

      <nav class="nav__links">
        <a href="index.html">Trang chủ</a>
        <a href="materials.html">Tài liệu học tập</a>

        <div class="nav__item has-dropdown">
          <a href="exam.html">Làm bài kiểm tra ▾</a>
          <div class="dropdown">
            <a href="exam.html">Kiểm tra nhận thức</a>
            <a href="practice.html" class="is-active">Ôn trắc nghiệm</a>
            <a href="quiz.html">Thi thử</a>
          </div>
        </div>

        <div class="nav__item has-dropdown">
          <a href="results.html">Kết quả kiểm tra ▾</a>
          <div class="dropdown">
            <a href="my-results.html">Kết quả của tôi</a>
            <a href="leaderboard.html">Bảng xếp hạng</a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- Chọn đối tượng -->
    <section class="card" id="startCard">
      <div class="field">
        <label>Chọn đối tượng ôn</label>
        <select id="practiceTopic" class="select">
          <option value="DQTV">Nhận thức chung của DQTV</option>
          <option value="LLTT">Nhận thức chung của LLTT</option>
        </select>
      </div>
      <p class="muted">
        Chế độ <b>ÔN TRẮC NGHIỆM</b> — tự lấy bộ câu hỏi theo Đối tượng, mặc định <b>50 câu</b>,
        <b>không</b> giới hạn thời gian.
      </p>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <button id="startBtn" class="btn btn-primary" type="button">BẮT ĐẦU</button>
      </div>
    </section>

    <!-- Vòng làm bài -->
    <section id="quizBox" class="card" hidden>
      <h3 id="qTitle" style="margin:0 0 8px">Câu 1</h3>
      <p id="qText" style="margin:0 0 12px"></p>
      <div class="progress"><div id="progressFill"></div></div>
      <form id="options"></form>

      <div class="quiz-actions" style="display:flex;gap:10px;justify-content:space-between;flex-wrap:wrap;margin-top:14px">
        <button type="button" id="prevBtn" class="btn">← Trước</button>
        <button type="button" id="reviewBtn" class="btn">Xem lại</button>
        <span style="flex:1"></span>
        <button type="button" id="nextBtn" class="btn">Tiếp →</button>
        <button type="button" id="submitBtn" class="btn btn-primary">Kết thúc</button>
      </div>
    </section>

    <!-- Kết quả -->
    <section id="resultCard" class="card" hidden>
      <h3>KẾT QUẢ ÔN TẬP</h3>
      <p id="resultText"></p>
      <div id="explainBox"></div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
        <a class="btn" href="review.practice.html">Xem lại & giải thích</a>
        <a class="btn" href="practice.html">Ôn lại</a>
        <a class="btn" href="index.html">Về trang chủ</a>
      </div>
    </section>
  </main>

  <!-- libs dùng chung -->
  <script src="config.js" defer></script>
  <script src="net.js" defer></script>
  <script src="analytics.js" defer></script>
  <script src="navbar.js" defer></script>
  <script src="app.try.js?v=20250928" defer></script>

  <!-- ===== BỔ SUNG P-2: toggle submenu trên MOBILE (scoped .page-quiz) ===== -->
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      if (!window.matchMedia('(max-width:768px)').matches) return; // chỉ mobile

      document.querySelectorAll('.page-quiz .nav__item.has-dropdown > a')
        .forEach(function(anchor){
          anchor.addEventListener('click', function(e){
            // không chuyển trang; mở/đóng submenu
            e.preventDefault();
            const item = anchor.parentElement;
            const wasOpen = item.classList.contains('open');

            // đóng các mục khác
            document.querySelectorAll('.page-quiz .nav__item.has-dropdown.open')
              .forEach(i => i.classList.remove('open'));

            // bật mục hiện tại nếu trước đó đang đóng
            if (!wasOpen) item.classList.add('open');
          });
        });

      // chạm ngoài để đóng
      document.addEventListener('click', function(e){
        if (!e.target.closest('.nav__links')) {
          document.querySelectorAll('.page-quiz .nav__item.has-dropdown.open')
            .forEach(i => i.classList.remove('open'));
        }
      });
    });
  </script>
  <!-- ===== /BỔ SUNG P-2 ===== -->
</body>
</html>
